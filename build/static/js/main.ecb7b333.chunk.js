(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{47:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(21),s=n.n(c),u=n(22),o=n(12),i=n(1),b=n.n(i),d=n(4),l=n(5),p=n(0),f=function(e){var t=e.search,n=e.setSearch;return Object(p.jsxs)("div",{children:["filter shown with"," ",Object(p.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})]})},j=function(e){var t=e.newName,n=e.number,r=e.setNewName,a=e.setNumber,c=e.handleSubmit;return Object(p.jsxs)("form",{onSubmit:c,children:[Object(p.jsxs)("div",{children:["name:"," ",Object(p.jsx)("input",{value:t,onChange:function(e){return r(e.target.value)}})]}),Object(p.jsxs)("div",{children:["number:"," ",Object(p.jsx)("input",{value:n,onChange:function(e){return a(e.target.value)}})]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var t=e.person,n=e.deletePerson;return Object(p.jsxs)("p",{children:[t.name," ",t.number," ",Object(p.jsx)("button",{onClick:function(){return n(t)},children:"delete"})]},t.name)},h=function(e){var t=e.persons,n=e.deletePerson;return Object(p.jsx)("div",{children:t.map((function(e){return Object(p.jsx)(m,{person:e,deletePerson:n},e.id)}))})},v=function(e){var t=e.notificationMessage,n=e.successStyle,r=e.errorStyle;if(!t.type)return null;var a=t.message,c=t.type;return Object(p.jsx)("div",{style:"success"===c?n:r,children:a})},x=n(7),O=n.n(x),g="/api/persons",w={getPersons:function(){var e=Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(g);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createPerson:function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post(g,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updatePerson:function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.put("".concat(g,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("".concat(g,"/").concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(l.a)(c,2),i=s[0],m=s[1],x=Object(r.useState)(""),O=Object(l.a)(x,2),g=O[0],y=O[1],k=Object(r.useState)(""),S=Object(l.a)(k,2),P=S[0],N=S[1],C=Object(r.useState)({message:null,type:null}),T=Object(l.a)(C,2),B=T[0],M=T[1];Object(r.useEffect)((function(){Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.getPersons();case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]);var z=function(){var e=Object(d.a)(b.a.mark((function e(t){var r,c,s,d,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(r=n.find((function(e){return e.name===i})))||r.name!==i||r.number===g||!window.confirm("".concat(i," already exists in the phonebook replace the old number with ").concat(g,"?"))){e.next=19;break}return c=Object(o.a)(Object(o.a)({},r),{},{number:g}),e.prev=4,e.next=7,w.updatePerson(r.id,c);case 7:s=e.sent,M({message:"The number saved for ".concat(s.name," has been changed from ").concat(r.number," to ").concat(c.number),type:"success"}),setTimeout((function(){M({message:null,type:null})}),5e3),a(n.map((function(e){return e.id===s.id?s:e}))),m(""),y(""),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),M({message:"Information of ".concat(c.name," has already been removed from the server"),type:"error"}),setTimeout((function(){M({message:null,type:null})}),5e3);case 19:if(r){e.next=35;break}return d={name:i,number:g},e.prev=21,e.next=24,w.createPerson(d);case 24:l=e.sent,M({message:"Added ".concat(l.name),type:"success"}),setTimeout((function(){M({message:null,type:null})}),5e3),a([].concat(Object(u.a)(n),[l])),m(""),y(""),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(21),console.error(e.t1);case 35:case"end":return e.stop()}}),e,null,[[4,15],[21,32]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,!window.confirm("Delete ".concat(t.name,"?"))){e.next=5;break}return e.next=4,w.deletePerson(t.id);case 4:a(n.filter((function(e){return e.id!==r})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=P?n.filter((function(e){return e.name.toLowerCase().includes(P)})):n;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Phonebook"}),Object(p.jsx)(v,{notificationMessage:B,successStyle:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},errorStyle:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}}),Object(p.jsx)(f,{search:P,setSearch:N}),Object(p.jsx)("h2",{children:"Add a new"}),Object(p.jsx)(j,{newName:i,number:g,setNewName:m,setNumber:y,handleSubmit:z}),Object(p.jsx)("h2",{children:"Numbers"}),Object(p.jsx)(h,{persons:D,deletePerson:A})]})};s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(y,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.ecb7b333.chunk.js.map